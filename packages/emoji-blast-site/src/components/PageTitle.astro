---
import { getImage } from "astro:assets";

import home from "~/assets/home.png";

import Button from "./Button.astro";
import Title from "./Title.astro";

const homeImage = await getImage({ src: home, format: "webp" });
---

<div id="title" style={`background-image: url(${homeImage.src});`}>
	<Title as="h1" />

	<p>ðŸŽ† Blasts emoji like fireworks all up in your HTML page. ðŸŽ‡</p>

	<div class="buttons">
		<Button as="a" href="/demos">Demos</Button>
		<Button as="a" href="/api">Full API</Button>
		|
		<Button as="button" id="clicker">Click Me</Button>
	</div>
</div>

<script>
	import { emojiBlast } from "emoji-blast";

	const clicker = document.getElementById("clicker")!;

	clicker.addEventListener("click", (event) => {
		let x: number, y: number;

		if (event.clientX === 0 && event.clientY === 0) {
			const rect = clicker.getBoundingClientRect();
			x = rect.x + rect.width / 2;
			y = rect.y + rect.height / 2;
		} else {
			x = event.clientX;
			y = event.clientY;
		}

		emojiBlast({ position: { x, y } });
	});
</script>

<style>
	#title {
		background-size: cover;
		display: flex;
		flex-direction: column;
		font-family: monospace;
		gap: 2rem;
		padding: 4rem 2rem 5rem;
		position: relative;
		overflow: hidden;
		text-align: center;
		width: 100%;
	}

	p {
		font-size: 0.875rem;
	}
</style>
